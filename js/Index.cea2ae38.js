(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Index"],{1909:function(t,n,e){"use strict";e("c016")},"1df0":function(t,n,e){},"24c9":function(t,n,e){"use strict";e.r(n);var i=e("7a23"),c={class:"layui-container",ref:"rootRef"},s={class:"layui-row layui-col-space15"},o={class:"layui-col-md8"},a={class:"layui-col-md4"};function r(t,n,e,r,l,u){var f=Object(i["C"])("imooc-top"),b=Object(i["C"])("imooc-list"),d=Object(i["C"])("imooc-tips"),j=Object(i["C"])("imooc-sign"),h=Object(i["C"])("imooc-hotlist"),O=Object(i["C"])("imooc-ads"),g=Object(i["C"])("imooc-links");return Object(i["v"])(),Object(i["g"])("div",c,[Object(i["h"])("div",s,[Object(i["h"])("div",o,[Object(i["k"])(f),Object(i["k"])(b)]),Object(i["h"])("div",a,[Object(i["k"])(d),Object(i["k"])(j),Object(i["k"])(h),Object(i["k"])(O),Object(i["k"])(g)])])],512)}e("9911");var l=function(t){return Object(i["y"])("data-v-07bd32e7"),t=t(),Object(i["w"])(),t},u={class:"fly-panel"},f=l((function(){return Object(i["h"])("h3",{class:"fly-panel-title"},"温馨通道",-1)})),b={class:"fly-panel-main layui-row"},d={class:"layui-clear imooc-quick"},j=["href"];function h(t,n,e,c,s,o){return Object(i["v"])(),Object(i["g"])("div",u,[f,Object(i["h"])("div",b,[Object(i["h"])("ul",d,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(s.lists,(function(t,n){return Object(i["v"])(),Object(i["g"])("li",{class:"layui-col-xs6",key:"tips"+n},[Object(i["h"])("a",{href:t.link,target:"_blank"},Object(i["F"])(t.title),9,j)])})),128))])])])}var O=e("cc48"),g={name:"tips",data:function(){return{lists:[]}},mounted:function(){var t=this;Object(O["e"])().then((function(n){200===n.code&&(t.lists=n.data)}))}},y=(e("62cc"),e("6b0d")),v=e.n(y);const m=v()(g,[["render",h],["__scopeId","data-v-07bd32e7"]]);var p=m,k=e("cddc"),S=e("2e43"),w=e("5539"),C=e("dec8"),I=e("d45b"),M={class:"fly-panel"},L=Object(i["h"])("div",{class:"fly-panel-title fly-filter"},[Object(i["h"])("p",null,"置顶")],-1);function $(t,n,e,c,s,o){var a=Object(i["C"])("list-item");return Object(i["M"])((Object(i["v"])(),Object(i["g"])("div",M,[L,Object(i["k"])(a,{lists:t.lists,isShow:!1},null,8,["lists"])],512)),[[i["J"],t.lists.length>0]])}var Y=e("2a93"),x=e("764f"),q={name:"top",mixins:[Y["a"]],data:function(){return{isTop:1}},components:{ListItem:x["a"]}};const F=v()(q,[["render",$]]);var _=F,D={name:"index",props:["uid"],components:{"imooc-tips":p,"imooc-sign":k["a"],"imooc-hotlist":S["a"],"imooc-ads":w["a"],"imooc-links":C["a"],"imooc-list":I["a"],"imooc-top":_},mounted:function(){window.vue=this}};const J=v()(D,[["render",r]]);n["default"]=J},"46d0":function(t,n,e){},"62cc":function(t,n,e){"use strict";e("1df0")},6386:function(t,n,e){"use strict";e("46d0")},c016:function(t,n,e){},c24f:function(t,n,e){"use strict";e.d(n,"m",(function(){return a})),e.d(n,"k",(function(){return r})),e.d(n,"l",(function(){return l})),e.d(n,"b",(function(){return u})),e.d(n,"a",(function(){return f})),e.d(n,"d",(function(){return b})),e.d(n,"h",(function(){return d})),e.d(n,"c",(function(){return h})),e.d(n,"f",(function(){return O})),e.d(n,"e",(function(){return g})),e.d(n,"i",(function(){return j})),e.d(n,"g",(function(){return y})),e.d(n,"j",(function(){return v}));var i=e("5530"),c=e("b775"),s=e("4328"),o=e.n(s),a=function(){return c["a"].get("/user/fav")},r=function(t){return c["a"].post("/user/basic",t)},l=function(t){return c["a"].get("/public/resetEmail?"+o.a.stringify(t))},u=function(t){return c["a"].post("/user/changePassword",Object(i["a"])({},t))},f=function(t){return c["a"].get("/user/setCollect?"+o.a.stringify(t))},b=function(t){return c["a"].get("/user/collect?"+o.a.stringify(t))},d=function(t){return c["a"].get("/user/post?"+o.a.stringify(t))},j=function(t){return c["a"].get("/public/latestPost?"+o.a.stringify(t))},h=function(t){return c["a"].get("/user/deletePost?"+o.a.stringify(t))},O=function(t){return c["a"].get("/public/info?"+o.a.stringify(t))},g=function(t){return c["a"].get("/public/latestComment?"+o.a.stringify(t))},y=function(t){return c["a"].get("/user/getmsg?"+o.a.stringify(t))},v=function(t){return c["a"].get("/user/setmsg?"+o.a.stringify(t))}},cddc:function(t,n,e){"use strict";var i=e("7a23"),c={class:"fly-panel fly-signin"},s={class:"fly-panel-title"},o=Object(i["j"])(" 签到 "),a=Object(i["h"])("i",{class:"fly-mid"},null,-1),r=Object(i["h"])("i",{class:"fly-mid"},null,-1),l=Object(i["j"])(" 活跃榜 "),u=Object(i["h"])("span",{class:"layui-badge-dot"},null,-1),f=[l,u],b={class:"fly-signin-days"},d=Object(i["j"])(" 已连续签到 "),j=Object(i["j"])("天 "),h={class:"fly-panel-main fly-signin-main"},O=Object(i["j"])(" 可获得 "),g=Object(i["j"])("飞吻 "),y={class:"layui-btn layui-btn-disabled"},v=Object(i["j"])(" 获得了 "),m=Object(i["j"])("飞吻 ");function p(t,n,e,l,u,p){var k=Object(i["C"])("sign-info"),S=Object(i["C"])("sign-list");return Object(i["v"])(),Object(i["g"])("div",c,[Object(i["h"])("div",s,[o,a,Object(i["h"])("a",{href:"javascript:;",class:"fly-link",id:"LAY_signinHelp",onClick:n[0]||(n[0]=function(t){return p.showInfo()})},"说明"),r,Object(i["h"])("a",{href:"javascript:;",class:"fly-link",id:"LAY_signinTop",onClick:n[1]||(n[1]=function(t){return p.showTop()})},f),Object(i["M"])(Object(i["h"])("span",b,[d,Object(i["h"])("cite",null,Object(i["F"])(p.count),1),j],512),[[i["J"],u.isSign||p.isLogin]])]),Object(i["h"])("div",h,[u.isSign?(Object(i["v"])(),Object(i["g"])(i["a"],{key:1},[Object(i["h"])("button",y,Object(i["F"])(u.msg),1),Object(i["h"])("span",null,[v,Object(i["h"])("cite",null,Object(i["F"])(p.favs),1),m])],64)):(Object(i["v"])(),Object(i["g"])(i["a"],{key:0},[Object(i["h"])("button",{class:"layui-btn layui-btn-danger",id:"LAY_signin",onClick:n[2]||(n[2]=function(t){return p.sign()})},"今日签到"),Object(i["h"])("span",null,[O,Object(i["h"])("cite",null,Object(i["F"])(p.favs),1),g])],64))]),Object(i["k"])(k,{isShow:u.isShow,onCloseModal:n[3]||(n[3]=function(t){return p.close()})},null,8,["isShow"]),Object(i["k"])(S,{isShow:u.showList,onCloseModal:n[4]||(n[4]=function(t){return p.close()})},null,8,["isShow"])])}e("99af");var k={class:"modal"},S={class:"layui-layer-title"},w=Object(i["j"])(" 签到说明 "),C=Object(i["i"])('<div class="layui-layer-content"><div class="layui-text"><blockquote class="layui-elem-quote">“签到”可获得的社区积分，规则如下</blockquote><table class="layui-table"><thead><tr><th>连续签到天数</th><th>每天可获积分</th></tr></thead><tbody><tr><td>&lt;5</td><td>5</td></tr><tr><td>≥5</td><td>10</td></tr><tr><td>≥15</td><td>15</td></tr><tr><td>≥30</td><td>20</td></tr><tr><td>≥100</td><td>30</td></tr><tr><td>≥365</td><td>50</td></tr></tbody></table><div><p>中间若有间隔，则连续天数重新计算</p><p class="orange">不可复用程序自动签到，否则积分清零</p></div></div></div>',1);function I(t,n,e,c,s,o){return Object(i["M"])((Object(i["v"])(),Object(i["g"])("div",k,[Object(i["h"])("div",{class:"mask",onClick:n[0]||(n[0]=function(t){return o.close()})}),Object(i["h"])("div",{class:Object(i["q"])(["layui-layer layui-layer-page",{active:e.isShow}])},[Object(i["h"])("div",S,[w,Object(i["h"])("i",{class:"layui-icon layui-icon-close pull-right",onClick:n[1]||(n[1]=function(t){return o.close()})})]),C],2)],512)),[[i["J"],e.isShow]])}var M={name:"sign-info",props:{isShow:{default:!1,type:Boolean}},methods:{close:function(){this.$emit("closeModal")}}},L=e("6b0d"),$=e.n(L);const Y=$()(M,[["render",I]]);var x=Y,q=(e("b0c0"),{class:"modal"}),F={class:"layui-layer-title"},_=Object(i["j"])(" 签到活跃榜 - TOP "),D={class:"layui-layer-content pd0"},J={class:"layui-tab layui-tab-brief"},T={class:"layui-tab-title"},B={class:"layui-tab-content fly-signin-list"},P={class:"layui-tab-item layui-show"},A=["src"],R=["src"],U={class:"fly-link"},E={key:2,class:"fly-grey"},H={key:3,class:"fly-grey"},z=Object(i["j"])(" 已经连续签到 "),G={class:"orange"},K=Object(i["j"])("天 ");function N(t,n,e,c,s,o){return Object(i["M"])((Object(i["v"])(),Object(i["g"])("div",q,[Object(i["h"])("div",{class:"mask",onClick:n[0]||(n[0]=function(t){return o.close()})}),Object(i["h"])("div",{class:Object(i["q"])(["layui-layer layui-layer-page",{active:e.isShow}])},[Object(i["h"])("div",F,[_,Object(i["h"])("i",{class:"layui-icon layui-icon-close pull-right",onClick:n[1]||(n[1]=function(t){return o.close()})})]),Object(i["h"])("div",D,[Object(i["h"])("div",J,[Object(i["h"])("ul",T,[Object(i["h"])("li",{class:Object(i["q"])({"layui-this":2===s.current}),onClick:n[2]||(n[2]=function(t){return o.choose(2)})},"最新签到",2),Object(i["h"])("li",{class:Object(i["q"])({"layui-this":1===s.current}),onClick:n[3]||(n[3]=function(t){return o.choose(1)})},"今日最快",2),Object(i["h"])("li",{class:Object(i["q"])({"layui-this":0===s.current}),onClick:n[4]||(n[4]=function(t){return o.choose(0)})},"总签到榜",2)]),Object(i["h"])("div",B,[Object(i["h"])("ul",P,[(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["B"])(s.lists,(function(t,n){return Object(i["v"])(),Object(i["g"])("li",{class:"sign-item",key:"sign"+n},[0===s.current?(Object(i["v"])(),Object(i["g"])("img",{key:0,src:t.pic?t.pic:"/img/bear-200-200.jpg",alt:"",class:"mr1"},null,8,A)):(Object(i["v"])(),Object(i["g"])("img",{key:1,src:t.uid?t.uid.pic:"/img/bear-200-200.jpg",class:"mr1"},null,8,R)),Object(i["h"])("cite",U,Object(i["F"])(t.name?t.name:t.uid.name),1),0!==s.current?(Object(i["v"])(),Object(i["g"])("span",E,"签到于 "+Object(i["F"])(o.getcreated(t.created)),1)):(Object(i["v"])(),Object(i["g"])("span",H,[z,Object(i["h"])("i",G,Object(i["F"])(t.count),1),K]))])})),128))])])])])],2)],512)),[[i["J"],e.isShow]])}var Q=e("b775"),V=e("4328"),W=e.n(V),X=function(t){return Q["a"].get("/public/hotSignRecord?"+W.a.stringify(t))},Z=e("7f08"),tt={name:"sign-list",props:{isShow:{default:!1,type:Boolean}},data:function(){return{current:0,lists:[],limit:20,page:0}},mounted:function(){this.getList()},computed:{getcreated:function(){return Z["a"]}},methods:{choose:function(t){this.current=t,this.getList()},close:function(){this.$emit("closeModal")},getList:function(){var t=this;X({page:this.page,limit:this.limit,index:this.current}).then((function(n){200===n.code&&(t.lists=n.data)}))}}};e("1909");const nt=$()(tt,[["render",N],["__scopeId","data-v-f18be87e"]]);var et=nt,it=e("c24f"),ct=e("5a0c"),st=e.n(ct),ot={name:"sign",components:{SignInfo:x,SignList:et},data:function(){return{isShow:!1,showList:!1,current:0,isSign:!1,msg:"",ctrl:""}},mounted:function(){var t=this.$store.state.userInfo.isSign,n=this.$store.state.userInfo.lastSign,e=st()().format("YYYY-MM-DD"),i=st()(n).format("YYYY-MM-DD"),c=st()(e).diff(st()(i),"day");c>0&&t?this.isSign=!1:(this.isSign=t,0===c&&t?this.nextSign():this.msg="今日已签到")},watch:{userInfo:function(t,n){!0===t.isSign?(this.nextSign(),this.isSign=!0):this.isSign=!1}},computed:{userInfo:function(){return this.$store.state.userInfo},isLogin:function(){return this.$store.state.isLogin},favs:function(){var t=parseInt(this.count),n=0;return t<5?n=5:t>=5&&t<15?n=10:t>=15&&t<30?n=15:t>=30&&t<100?n=20:t>=100&&t<365?n=30:t>=365&&(n=50),n},count:function(){return this.$store.state.userInfo!=={}&&"undefined"!==typeof this.$store.state.userInfo.count?this.$store.state.userInfo.count:0}},methods:{nextSign:function(){var t=this;clearInterval(this.ctrl);var n=st()().add(1,"day").format("YYYY-MM-DD"),e=st()(n+" 00:00:00").diff(st()(),"second"),i=Math.floor(e/3600),c=Math.floor(e%3600/60),s=e%60;this.msg="签到倒计时 ".concat(i,":").concat(c<10?"0"+c:c,":").concat(s<10?"0"+s:s),this.ctrl=setInterval((function(){if(e=st()(n+" 00:00:00").diff(st()(),"second"),i=Math.floor(e/3600),c=Math.floor(e%3600/60),s=e%60,t.msg="签到倒计时 ".concat(i,":").concat(c<10?"0"+c:c,":").concat(s<10?"0"+s:s),e<=0){clearInterval(t.ctrl),t.isSign=!1;var o=t.$store.state.userInfo;o.isSign=!1,t.$store.commit("setUserInfo",o)}}),1e3)},showInfo:function(){this.isShow=!0},showTop:function(){this.showList=!0},close:function(){this.isShow=!1,this.showList=!1},choose:function(t){this.current=t},sign:function(){var t=this;this.isLogin?(Object(it["m"])().then((function(n){var e=t.$store.state.userInfo;200===n.code?(e.favs=n.favs,e.count=n.count,t.$pop("","签到成功！")):t.$pop("","您已经签到！"),e.isSign=!0,e.lastSign=n.lastSign,t.isSign=!0,t.$store.commit("setUserInfo",e)})),this.nextSign()):this.$pop("shake","请先登录")}}};e("6386");const at=$()(ot,[["render",p]]);n["a"]=at}}]);