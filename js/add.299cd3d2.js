(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["add"],{"1af0":function(e,t,a){"use strict";a.r(t);var n=a("7a23"),i={class:"fly-panel",pad20:"",style:{"padding-top":"5px"}},r={class:"layui-form layui-form-pane"},l={class:"layui-tab layui-tab-brief","lay-filter":"user"},c=Object(n["h"])("ul",{class:"layui-tab-title"},[Object(n["h"])("li",{class:"layui-this"}," 发表新帖 ")],-1),o={class:"layui-form layui-tab-content",id:"LAY_ucm",style:{padding:"20px 0"}},s={class:"layui-tab-item layui-show"},u={class:"layui-row layui-col-space15 layui-form-item"},d={class:"layui-col-md3"},f={class:"layui-row"},p=Object(n["h"])("label",{class:"layui-form-label",for:"catalogs"},"所在专栏",-1),y={class:"layui-select-title"},b=Object(n["h"])("i",{class:"layui-edge"},null,-1),h={class:"layui-anim layui-anim-upbit"},v=["onClick"],m={class:"layui-row"},j={style:{color:"#c00"}},O={class:"layui-col-md9"},g={class:"layui-row"},x=Object(n["h"])("label",{class:"layui-form-label"},"标题",-1),w={class:"layui-input-block"},k={class:"layui-row"},I={style:{color:"#c00"}},C={class:"layui-form-item"},A={class:"layui-inline"},S=Object(n["h"])("label",{class:"layui-form-label"},"悬赏飞吻",-1),L={class:"layui-input-inline",style:{width:"190px"}},D={class:"layui-select-title"},F=Object(n["h"])("i",{class:"layui-edge"},null,-1),N={class:"layui-anim layui-anim-upbit"},H=["onClick"],P=Object(n["h"])("div",{class:"layui-form-mid layui-word-aux"},"发表后无法更改飞吻",-1),R={class:"layui-form-item"},E={class:"layui-row"},$=Object(n["h"])("label",{class:"layui-form-label"},"验证码",-1),_={class:"layui-input-inline"},T={class:""},V=["innerHTML"],U={class:"layui-form-mid"},B={style:{color:"#c00"}},M={class:"layui-form-item"};function q(e,t,a,q,z,J){var Q=Object(n["C"])("editor");return Object(n["v"])(),Object(n["g"])("div",{class:Object(n["q"])(["layui-container fly-marginTop",{"d-hide":J.isHide}])},[Object(n["h"])("div",i,[Object(n["h"])("div",r,[Object(n["h"])("div",l,[c,Object(n["h"])("div",o,[Object(n["h"])("div",s,[Object(n["h"])("form",null,[Object(n["h"])("div",u,[Object(n["h"])("div",d,[Object(n["h"])("div",f,[p,Object(n["h"])("div",{class:"layui-input-block",onClick:t[1]||(t[1]=function(e){return J.changeSelect()})},[Object(n["h"])("div",{class:Object(n["q"])(["layui-unselect layui-form-select",{"layui-form-selected":z.isSelect}])},[Object(n["h"])("div",y,[Object(n["M"])(Object(n["h"])("input",{id:"catalogs",type:"text",placeholder:"请选择",readonly:"","onUpdate:modelValue":t[0]||(t[0]=function(e){return z.catalogs[z.cataIndex].text=e}),class:"layui-input layui-unselect"},null,512),[[n["I"],z.catalogs[z.cataIndex].text]]),b]),Object(n["h"])("dl",h,[(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["B"])(z.catalogs,(function(e,t){return Object(n["v"])(),Object(n["g"])("dd",{key:"catalog"+t,onClick:function(a){return J.chooseCatalog(e,t)},class:Object(n["q"])({"layui-this":t===z.cataIndex})},Object(n["F"])(e.text),11,v)})),128))])],2)])]),Object(n["h"])("div",m,[Object(n["h"])("span",j,Object(n["F"])(z.msgcatalogsvalue),1)])]),Object(n["h"])("div",O,[Object(n["h"])("div",g,[x,Object(n["h"])("div",w,[Object(n["M"])(Object(n["h"])("input",{type:"text",class:"layui-input","onUpdate:modelValue":t[2]||(t[2]=function(e){return z.title=e}),onInput:t[3]||(t[3]=function(){return J.checktitle&&J.checktitle.apply(J,arguments)})},null,544),[[n["I"],z.title]])])]),Object(n["h"])("div",k,[Object(n["h"])("span",I,Object(n["F"])(z.msgtitle),1)])])]),Object(n["k"])(Q,{onChangeContent:J.add,initContent:z.content},null,8,["onChangeContent","initContent"]),Object(n["h"])("div",C,[Object(n["h"])("div",A,[S,Object(n["h"])("div",L,[Object(n["h"])("div",{class:Object(n["q"])(["layui-unselect layui-form-select",{"layui-form-selected":z.isSelect_fav}]),onClick:t[5]||(t[5]=function(e){return J.changeFav()})},[Object(n["h"])("div",D,[Object(n["M"])(Object(n["h"])("input",{type:"text",placeholder:"请选择",readonly:"","onUpdate:modelValue":t[4]||(t[4]=function(e){return z.favList[z.favIndex]=e}),class:"layui-input layui-unselect"},null,512),[[n["I"],z.favList[z.favIndex]]]),F]),Object(n["h"])("dl",N,[(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["B"])(z.favList,(function(e,t){return Object(n["v"])(),Object(n["g"])("dd",{key:"catalog"+t,onClick:function(a){return J.chooseFav(e,t)},class:Object(n["q"])({"layui-this":t===z.favIndex})},Object(n["F"])(e),11,H)})),128))])],2)]),P])]),Object(n["h"])("div",R,[Object(n["h"])("div",E,[$,Object(n["h"])("div",_,[Object(n["M"])(Object(n["h"])("input",{type:"text",name:"code","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.code=t}),placeholder:"请输入验证码",autocomplete:"off",class:"layui-input",onInput:t[7]||(t[7]=function(){return e.checkcode&&e.checkcode.apply(e,arguments)})},null,544),[[n["I"],e.code]])]),Object(n["h"])("div",T,[Object(n["h"])("span",{class:"svg",style:{color:"#c00"},onClick:t[8]||(t[8]=function(t){return e._getCode()}),innerHTML:e.svg},null,8,V)])]),Object(n["h"])("div",U,[Object(n["h"])("span",B,Object(n["F"])(e.msgcode),1)])]),Object(n["h"])("div",M,[Object(n["h"])("button",{type:"button",class:"layui-btn",onClick:t[9]||(t[9]=function(){return J.submit&&J.submit.apply(J,arguments)})},"立即发布")])])])])])])])],2)}var z=a("1da1"),J=(a("96cf"),a("498a"),a("cc48")),Q=a("81b3"),Y=a("32d8"),G={name:"add",mixins:[Q["a"]],components:{Editor:Y["a"]},data:function(){return{isSelect:!1,isSelect_fav:!1,cataIndex:0,msgcatalogsvalue:void 0,msgtitle:void 0,favIndex:0,catalogs:[{text:"请选择",value:""},{text:"提问",value:"ask"},{text:"分享",value:"share"},{text:"讨论",value:"discuss"},{text:"建议",value:"advise"}],favList:[20,30,50,60,80],content:"",title:""}},mounted:function(){var e=this;window.vue=this;var t=localStorage.getItem("addData");t&&""!==t&&this.$confirm("是否加载未编辑完的内容？",(function(){var a=JSON.parse(t);e.content=a.content,e.title=a.title,e.cataIndex=a.cataIndex,e.favIndex=a.favIndex}),(function(){localStorage.setItem("addData","")}))},methods:{chooseCatalog:function(e,t){this.cataIndex=t,0===this.cataIndex?this.msgcatalogsvalue="请选择分类":this.msgcatalogsvalue=""},checktitle:function(){""===this.title?this.msgtitle="请输入标题":this.msgtitle=""},chooseFav:function(e,t){this.favIndex=t},changeSelect:function(){this.isSelect=!this.isSelect},changeFav:function(){this.isSelect_fav=!this.isSelect_fav},add:function(e){this.content=e;var t={title:this.title,cataIndex:this.cataIndex,content:this.content,favIndex:this.favIndex};""!==this.title.trim()&&""!==this.content.trim()&&localStorage.setItem("addData",JSON.stringify(t))},global_validate:function(){return""===this.msgcatalogsvalue&&""===this.msgtitle&&""===this.msgcode||(0===this.cataIndex&&(this.msgcatalogsvalue="请选择分类",this.$alert("请选择分类")),""===this.title&&(this.msgtitle="请输入标题",this.$alert("请输入标题")),!1)},submit:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.global_validate(),a){t.next=3;break}return t.abrupt("return");case 3:if(""!==e.content.trim()){t.next=6;break}return e.$alert("文章内容不得为空！"),t.abrupt("return");case 6:Object(J["a"])({title:e.title,catalog:e.catalogs[e.cataIndex].value,content:e.content,fav:e.favList[e.favIndex],code:e.code,sid:e.$store.state.sid}).then((function(t){200===t.code?(localStorage.setItem("addData",""),e.$pop("","发贴成功!"),setTimeout((function(){e.$router.push({name:"detail",params:{tid:t.data._id}})}),2e3)):e.$alert(t.msg)}));case 7:case"end":return t.stop()}}),t)})))()}},computed:{isHide:function(){return this.$store.state.isHide}}},K=a("6b0d"),W=a.n(K);const X=W()(G,[["render",q]]);t["default"]=X},4127:function(e,t,a){"use strict";var n=a("d233"),i=a("b313"),r={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Date.prototype.toISOString,c={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},o=function e(t,a,i,r,l,o,s,u,d,f,p,y){var b=t;if("function"===typeof s)b=s(a,b);else if(b instanceof Date)b=f(b);else if(null===b){if(r)return o&&!y?o(a,c.encoder):a;b=""}if("string"===typeof b||"number"===typeof b||"boolean"===typeof b||n.isBuffer(b)){if(o){var h=y?a:o(a,c.encoder);return[p(h)+"="+p(o(b,c.encoder))]}return[p(a)+"="+p(String(b))]}var v,m=[];if("undefined"===typeof b)return m;if(Array.isArray(s))v=s;else{var j=Object.keys(b);v=u?j.sort(u):j}for(var O=0;O<v.length;++O){var g=v[O];l&&null===b[g]||(m=Array.isArray(b)?m.concat(e(b[g],i(a,g),i,r,l,o,s,u,d,f,p,y)):m.concat(e(b[g],a+(d?"."+g:"["+g+"]"),i,r,l,o,s,u,d,f,p,y)))}return m};e.exports=function(e,t){var a=e,l=t?n.assign({},t):{};if(null!==l.encoder&&void 0!==l.encoder&&"function"!==typeof l.encoder)throw new TypeError("Encoder has to be a function.");var s="undefined"===typeof l.delimiter?c.delimiter:l.delimiter,u="boolean"===typeof l.strictNullHandling?l.strictNullHandling:c.strictNullHandling,d="boolean"===typeof l.skipNulls?l.skipNulls:c.skipNulls,f="boolean"===typeof l.encode?l.encode:c.encode,p="function"===typeof l.encoder?l.encoder:c.encoder,y="function"===typeof l.sort?l.sort:null,b="undefined"!==typeof l.allowDots&&l.allowDots,h="function"===typeof l.serializeDate?l.serializeDate:c.serializeDate,v="boolean"===typeof l.encodeValuesOnly?l.encodeValuesOnly:c.encodeValuesOnly;if("undefined"===typeof l.format)l.format=i["default"];else if(!Object.prototype.hasOwnProperty.call(i.formatters,l.format))throw new TypeError("Unknown format option provided.");var m,j,O=i.formatters[l.format];"function"===typeof l.filter?(j=l.filter,a=j("",a)):Array.isArray(l.filter)&&(j=l.filter,m=j);var g,x=[];if("object"!==typeof a||null===a)return"";g=l.arrayFormat in r?l.arrayFormat:"indices"in l?l.indices?"indices":"repeat":"indices";var w=r[g];m||(m=Object.keys(a)),y&&m.sort(y);for(var k=0;k<m.length;++k){var I=m[k];d&&null===a[I]||(x=x.concat(o(a[I],I,w,u,d,f?p:null,j,y,b,h,O,v)))}var C=x.join(s),A=!0===l.addQueryPrefix?"?":"";return C.length>0?A+C:""}},4328:function(e,t,a){"use strict";var n=a("4127"),i=a("9e6a"),r=a("b313");e.exports={formats:r,parse:i,stringify:n}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("e330"),i=a("1d80"),r=a("577e"),l=a("5899"),c=n("".replace),o="["+l+"]",s=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(e){return function(t){var a=r(i(t));return 1&e&&(a=c(a,s,"")),2&e&&(a=c(a,u,"")),a}};e.exports={start:d(1),end:d(2),trim:d(3)}},"9e6a":function(e,t,a){"use strict";var n=a("d233"),i=Object.prototype.hasOwnProperty,r={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},l=function(e,t){for(var a={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,c=n.split(t.delimiter,l),o=0;o<c.length;++o){var s,u,d=c[o],f=d.indexOf("]="),p=-1===f?d.indexOf("="):f+1;-1===p?(s=t.decoder(d,r.decoder),u=t.strictNullHandling?null:""):(s=t.decoder(d.slice(0,p),r.decoder),u=t.decoder(d.slice(p+1),r.decoder)),i.call(a,s)?a[s]=[].concat(a[s]).concat(u):a[s]=u}return a},c=function(e,t,a){for(var n=t,i=e.length-1;i>=0;--i){var r,l=e[i];if("[]"===l)r=[],r=r.concat(n);else{r=a.plainObjects?Object.create(null):{};var c="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,o=parseInt(c,10);!isNaN(o)&&l!==c&&String(o)===c&&o>=0&&a.parseArrays&&o<=a.arrayLimit?(r=[],r[o]=n):r[c]=n}n=r}return n},o=function(e,t,a){if(e){var n=a.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,r=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,o=r.exec(n),s=o?n.slice(0,o.index):n,u=[];if(s){if(!a.plainObjects&&i.call(Object.prototype,s)&&!a.allowPrototypes)return;u.push(s)}var d=0;while(null!==(o=l.exec(n))&&d<a.depth){if(d+=1,!a.plainObjects&&i.call(Object.prototype,o[1].slice(1,-1))&&!a.allowPrototypes)return;u.push(o[1])}return o&&u.push("["+n.slice(o.index)+"]"),c(u,t,a)}};e.exports=function(e,t){var a=t?n.assign({},t):{};if(null!==a.decoder&&void 0!==a.decoder&&"function"!==typeof a.decoder)throw new TypeError("Decoder has to be a function.");if(a.ignoreQueryPrefix=!0===a.ignoreQueryPrefix,a.delimiter="string"===typeof a.delimiter||n.isRegExp(a.delimiter)?a.delimiter:r.delimiter,a.depth="number"===typeof a.depth?a.depth:r.depth,a.arrayLimit="number"===typeof a.arrayLimit?a.arrayLimit:r.arrayLimit,a.parseArrays=!1!==a.parseArrays,a.decoder="function"===typeof a.decoder?a.decoder:r.decoder,a.allowDots="boolean"===typeof a.allowDots?a.allowDots:r.allowDots,a.plainObjects="boolean"===typeof a.plainObjects?a.plainObjects:r.plainObjects,a.allowPrototypes="boolean"===typeof a.allowPrototypes?a.allowPrototypes:r.allowPrototypes,a.parameterLimit="number"===typeof a.parameterLimit?a.parameterLimit:r.parameterLimit,a.strictNullHandling="boolean"===typeof a.strictNullHandling?a.strictNullHandling:r.strictNullHandling,""===e||null===e||"undefined"===typeof e)return a.plainObjects?Object.create(null):{};for(var i="string"===typeof e?l(e,a):e,c=a.plainObjects?Object.create(null):{},s=Object.keys(i),u=0;u<s.length;++u){var d=s[u],f=o(d,i[d],a);c=n.merge(c,f,a)}return n.compact(c)}},b313:function(e,t,a){"use strict";var n=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return n.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},d233:function(e,t,a){"use strict";var n=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),r=function(e){var t;while(e.length){var a=e.pop();if(t=a.obj[a.prop],Array.isArray(t)){for(var n=[],i=0;i<t.length;++i)"undefined"!==typeof t[i]&&n.push(t[i]);a.obj[a.prop]=n}}return t},l=function(e,t){for(var a=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!==typeof e[n]&&(a[n]=e[n]);return a},c=function e(t,a,i){if(!a)return t;if("object"!==typeof a){if(Array.isArray(t))t.push(a);else{if("object"!==typeof t)return[t,a];(i.plainObjects||i.allowPrototypes||!n.call(Object.prototype,a))&&(t[a]=!0)}return t}if("object"!==typeof t)return[t].concat(a);var r=t;return Array.isArray(t)&&!Array.isArray(a)&&(r=l(t,i)),Array.isArray(t)&&Array.isArray(a)?(a.forEach((function(a,r){n.call(t,r)?t[r]&&"object"===typeof t[r]?t[r]=e(t[r],a,i):t.push(a):t[r]=a})),t):Object.keys(a).reduce((function(t,r){var l=a[r];return n.call(t,r)?t[r]=e(t[r],l,i):t[r]=l,t}),r)},o=function(e,t){return Object.keys(t).reduce((function(e,a){return e[a]=t[a],e}),e)},s=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},u=function(e){if(0===e.length)return e;for(var t="string"===typeof e?e:String(e),a="",n=0;n<t.length;++n){var r=t.charCodeAt(n);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122?a+=t.charAt(n):r<128?a+=i[r]:r<2048?a+=i[192|r>>6]+i[128|63&r]:r<55296||r>=57344?a+=i[224|r>>12]+i[128|r>>6&63]+i[128|63&r]:(n+=1,r=65536+((1023&r)<<10|1023&t.charCodeAt(n)),a+=i[240|r>>18]+i[128|r>>12&63]+i[128|r>>6&63]+i[128|63&r])}return a},d=function(e){for(var t=[{obj:{o:e},prop:"o"}],a=[],n=0;n<t.length;++n)for(var i=t[n],l=i.obj[i.prop],c=Object.keys(l),o=0;o<c.length;++o){var s=c[o],u=l[s];"object"===typeof u&&null!==u&&-1===a.indexOf(u)&&(t.push({obj:l,prop:s}),a.push(u))}return r(t)},f=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},p=function(e){return null!==e&&"undefined"!==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};e.exports={arrayToObject:l,assign:o,compact:d,decode:s,encode:u,isBuffer:p,isRegExp:f,merge:c}}}]);